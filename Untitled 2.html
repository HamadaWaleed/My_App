<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Website That Lies â€” ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ­ÙŠÙ‘Ø²Ø§Øª</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#111a33;
      --panel2:#0f1730;
      --text:#e8ecff;
      --muted:#aab3d6;
      --accent:#6ee7ff;
      --good:#5cffb0;
      --warn:#ffd36e;
      --bad:#ff6e8a;
      --border: rgba(255,255,255,.12);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 800px at 20% 10%, rgba(110,231,255,.18), transparent 60%),
                  radial-gradient(1000px 700px at 85% 20%, rgba(92,255,176,.14), transparent 55%),
                  radial-gradient(900px 700px at 60% 90%, rgba(255,110,138,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .app{width:min(980px, 100%);}
    .topbar{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      margin-bottom:14px;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      font-weight:700; letter-spacing:.2px;
    }
    .dot{
      width:12px; height:12px; border-radius:50%;
      background: linear-gradient(135deg, var(--accent), var(--good));
      box-shadow: 0 0 20px rgba(110,231,255,.45);
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      padding:8px 12px; border-radius:999px;
      color:var(--muted); font-size:13px;
    }
    .pill b{color:var(--text)}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .content{padding:22px;}
    h1{margin:0 0 8px 0; font-size:26px}
    p{margin:0; color:var(--muted); line-height:1.7}
    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    @media (max-width: 860px){
      .grid{grid-template-columns:1fr}
    }
    .panel{
      background: rgba(17,26,51,.75);
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px;
    }
    .metrics{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 520px){
      .metrics{grid-template-columns:1fr}
    }
    .metric{
      background: rgba(15,23,48,.75);
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      min-height:84px;
    }
    .metric .k{font-size:12px; color:var(--muted)}
    .metric .v{font-size:22px; font-weight:800; margin-top:6px}
    .metric .tag{margin-top:6px; font-size:12px; color:var(--muted)}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
    }
    .badge .mark{
      width:9px; height:9px; border-radius:50%;
      background: var(--good);
      box-shadow: 0 0 16px rgba(92,255,176,.35);
    }
    .choices{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:14px;
    }
    .choice{
      text-align:right;
      cursor:pointer;
      border-radius:14px;
      padding:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      position:relative;
      overflow:hidden;
    }
    .choice:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.05);
      border-color: rgba(110,231,255,.25);
    }
    .choice h3{margin:0 0 6px 0; font-size:16px}
    .choice small{color:var(--muted); line-height:1.55; display:block}
    .choice .ribbon{
      position:absolute;
      top:10px; left:-40px;
      transform: rotate(-14deg);
      background: linear-gradient(135deg, rgba(110,231,255,.9), rgba(92,255,176,.9));
      color:#061023;
      font-weight:800;
      padding:6px 48px;
      font-size:12px;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
    }

    .sideTitle{font-weight:800; margin:0 0 8px 0}
    .hint{font-size:13px; color:var(--muted); line-height:1.6}
    .btnRow{display:flex; gap:10px; margin-top:14px; flex-wrap:wrap}
    .btn{
      cursor:pointer;
      border-radius:12px;
      padding:10px 12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--text);
      font-weight:700;
      transition: transform .12s ease, background .12s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.06)}
    .btn.primary{
      border-color: rgba(110,231,255,.35);
      background: rgba(110,231,255,.10);
    }
    .btn.danger{
      border-color: rgba(255,110,138,.35);
      background: rgba(255,110,138,.10);
    }

    .footer{
      padding:14px 22px;
      border-top:1px solid var(--border);
      display:flex;
      justify-content:space-between;
      align-items:center;
      color:var(--muted);
      font-size:13px;
      gap:12px;
      flex-wrap:wrap;
    }
    .kbd{
      border:1px solid var(--border);
      border-bottom-color: rgba(255,255,255,.22);
      background: rgba(0,0,0,.18);
      padding:2px 8px;
      border-radius:8px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color:var(--text);
      font-size:12px;
    }

    /* Modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:999;
    }
    .overlay.show{display:flex}
    .modal{
      width:min(920px, 100%);
      border-radius:18px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(17,26,51,.92), rgba(15,23,48,.92));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalHead{
      padding:18px 18px 12px 18px;
      border-bottom:1px solid var(--border);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
    }
    .modalHead h2{margin:0; font-size:18px}
    .close{
      cursor:pointer;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--text);
      font-weight:800;
    }
    .modalBody{padding:18px}
    .explainGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    @media (max-width: 800px){
      .explainGrid{grid-template-columns:1fr}
    }
    .explain{
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      border-radius:16px;
      padding:14px;
    }
    .explain h4{margin:0 0 8px 0}
    .explain p{margin:0; color:var(--muted)}
    .label{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px; color:var(--muted);
      border:1px solid var(--border);
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.03);
      margin-top:10px;
    }
    .pulse{
      display:inline-block;
      width:8px; height:8px; border-radius:50%;
      background: var(--warn);
      box-shadow: 0 0 0 rgba(255,211,110,.55);
      animation: pulse 1.3s infinite;
    }
    @keyframes pulse{
      0%{box-shadow:0 0 0 0 rgba(255,211,110,.35)}
      70%{box-shadow:0 0 0 12px rgba(255,211,110,0)}
      100%{box-shadow:0 0 0 0 rgba(255,211,110,0)}
    }
    .miniNote{
      margin-top:12px;
      font-size:13px;
      color:var(--muted);
      line-height:1.7;
    }
    .hr{height:1px; background: var(--border); margin:14px 0}
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      color: rgba(232,236,255,.9);
      background: rgba(0,0,0,.22);
      border:1px solid var(--border);
      padding:10px;
      border-radius:14px;
      overflow:auto;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <span class="dot"></span>
        <span>ØªØ¬Ø±Ø¨Ø© ØªØ­ÙŠÙ‘Ø²Ø§Øª â€” Website That Lies</span>
      </div>
      <div class="pill"><span class="pulse"></span> ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ: <b>ÙˆØ§Ø¬Ù‡Ø© â€œØªÙˆØ¬Ù‘Ù‡Ùƒâ€</b></div>
    </div>

    <div class="card">
      <div class="content">
        <h1 id="headline">Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹: Ø£ÙŠ Ø®ÙŠØ§Ø± â€œØ£ÙØ¶Ù„â€ØŸ</h1>
        <p id="sub">
          Ø±Ø§Ø­ Ø£Ø¹Ø±Ø¶ Ø¹Ù„ÙŠÙƒ Ø®ÙŠØ§Ø±ÙŠÙ†ØŒ Ø§Ø®ØªÙØ± Ø§Ù„Ù„ÙŠ ØªØ´ÙˆÙÙ‡ Ù…Ù†Ø§Ø³Ø¨.  
          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ â€œØªØ­Ù„ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø³Ø§Ø¨Ù‚ÙŠÙ†â€ ÙˆÙ…Ø¤Ø´Ø±Ø§Øª Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©.
        </p>

        <div class="grid">
          <div class="panel">
            <div class="badge"><span class="mark"></span> Ù…ÙˆØ«Ù‘Ù‚ â€¢ Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>

            <div class="metrics" id="metrics">
              <!-- filled by JS -->
            </div>

            <div class="choices" id="choices">
              <!-- filled by JS -->
            </div>

            <div class="btnRow">
              <div class="btn primary" id="btnNew">ØªØ¬Ø±Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
              <div class="btn" id="btnToggle">ØªØ¨Ø¯ÙŠÙ„ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ø§Ø¹: Ù…ØªÙˆØ³Ø·</div>
              <div class="btn danger" id="btnReset">ØªØµÙÙŠØ± ÙƒÙ„Ø´ÙŠ</div>
            </div>

            <div class="miniNote">
              ØªÙ„Ù…ÙŠØ­: Ù„Ø§ ØªØ¯Ù‚Ù‚ Ù‡ÙˆØ§ÙŠâ€¦ Ø®Ù„ÙŠÙƒ Ø¹ÙÙˆÙŠ. (Ù‡Ø°Ø§ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø©)
            </div>
          </div>

          <div class="panel">
            <div class="sideTitle">Ø´Ù†Ùˆ Ù‡Ø¯Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ</div>
            <div class="hint">
              Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â€œÙŠØ¶Ù„Ù‘Ù„Ùƒâ€ Ø¨Ø´ÙƒÙ„ Ø£Ø®Ù„Ø§Ù‚ÙŠ Ø­ØªÙ‰ ÙŠØ¨ÙŠÙ‘Ù† Ù„Ùƒ Ø´Ù„ÙˆÙ†:
              <br/>â€¢ Ø§Ù„ÙƒÙ„Ù…Ø§Øª + Ø§Ù„Ø£Ù„ÙˆØ§Ù† + Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
              <br/>â€¢ ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
              <br/>ØªÚ¯Ø¯Ø± ØªØºÙŠÙ‘Ø± Ù‚Ø±Ø§Ø±Ùƒ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªØ­Ø³.
            </div>

            <div class="hr"></div>

            <div class="sideTitle">Ø´Ù†Ùˆ Ø±Ø§Ø­ ÙŠØµÙŠØ± Ø¨Ø¹Ø¯ Ù…Ø§ ØªØ®ØªØ§Ø±ØŸ</div>
            <div class="hint">
              Ø±Ø§Ø­ ÙŠØ¸Ù‡Ø± ØªÙØ³ÙŠØ± ÙˆØ§Ø¶Ø­:
              <br/>â€¢ Ø´Ù†Ùˆ Ø§Ù„ØªØ­ÙŠÙ‘Ø² Ø§Ù„Ù†ÙØ³ÙŠ Ø§Ù„Ù„ÙŠ Ø§Ø´ØªØºÙ„ Ø¹Ù†Ø¯Ùƒ
              <br/>â€¢ Ø´Ù†Ùˆ â€œØ§Ù„Ø®Ø¯Ø¹Ø©â€ Ø§Ù„Ù„ÙŠ Ø§Ø³ØªØ®Ø¯Ù…ØªÙ‡Ø§ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
              <br/>â€¢ Ø´Ù„ÙˆÙ† ØªØªØ¬Ù†Ø¨Ù‡Ø§ Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹
            </div>

            <div class="hr"></div>

            <div class="hint">
              Ø§Ø®ØªØµØ§Ø±Ø§Øª:
              <span class="kbd">N</span> ØªØ¬Ø±Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
              <span class="kbd">Esc</span> ØºÙ„Ù‚ Ø§Ù„ØªÙØ³ÙŠØ±
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div>Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Demo ØªØ¹Ù„ÙŠÙ…ÙŠ. Ù„Ø§ ÙŠØ³ØªØ®Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©.</div>
        <div>Version: <span class="kbd">1.0</span></div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="ØªÙØ³ÙŠØ± Ø§Ù„ØªØ­ÙŠÙ‘Ø²">
      <div class="modalHead">
        <div>
          <h2 id="mTitle">ØªØ­Ù„ÙŠÙ„ Ø§Ø®ØªÙŠØ§Ø±Ùƒ</h2>
          <div class="label"><span class="pulse"></span> ÙƒØ´Ù Ø§Ù„Ø®Ø¯Ø¹Ø© + ØªÙØ³ÙŠØ± Ù†ÙØ³ÙŠ</div>
        </div>
        <button class="close" id="btnClose">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
      <div class="modalBody">
        <p id="mIntro" style="margin:0;color:var(--muted);line-height:1.7"></p>

        <div class="explainGrid" id="explainGrid">
          <!-- filled by JS -->
        </div>

        <div class="hr"></div>

        <div class="sideTitle">Ø´Ù†Ùˆ Ø§Ù„Ù„ÙŠ â€œÙƒØ°Ø¨Ù†Ø§Ù‡â€ØŸ</div>
        <div class="mono" id="mTech"></div>

        <div class="miniNote">
          Ø¥Ø°Ø§ ØªØ­Ø¨ Ù†Ø®Ù„ÙŠ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø£Ù‚ÙˆÙ‰: Ù†Ø¶ÙŠÙ Ù…Ø±Ø­Ù„Ø© Ø«Ø§Ù†ÙŠØ©ØŒ ÙˆÙ†Ø®Ù„ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â€œÙŠØ°ÙƒÙ‘Ø±Ùƒâ€ Ø¨Ø§Ø®ØªÙŠØ§Ø±Ø§ØªÙƒØŒ ÙˆÙŠÙƒØ´Ù ØªØ­ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©.
        </div>
      </div>
    </div>
  </div>

  <script>
    // ----------------------------
    // Ethical "Website That Lies" Demo
    // Web-only. No backend.
    // ----------------------------

    const $ = (s) => document.querySelector(s);

    const overlay = $("#overlay");
    const choicesEl = $("#choices");
    const metricsEl = $("#metrics");
    const explainGridEl = $("#explainGrid");

    const btnNew = $("#btnNew");
    const btnToggle = $("#btnToggle");
    const btnReset = $("#btnReset");
    const btnClose = $("#btnClose");

    // 3 levels of manipulation intensity
    const levels = [
      { key:"low",   label:"Ù…Ù†Ø®ÙØ¶",  nudge:0.25 },
      { key:"mid",   label:"Ù…ØªÙˆØ³Ø·",  nudge:0.55 },
      { key:"high",  label:"Ø¹Ø§Ù„ÙŠ",   nudge:0.85 }
    ];
    let levelIndex = 1; // default: mid

    // Demo scenarios (you can add more)
    const scenarios = [
      {
        id: "plan",
        title: "Ø£ÙŠ Ø®Ø·Ø© Ø§Ø´ØªØ±Ø§Ùƒ ØªÙ†Ø§Ø³Ø¨ÙƒØŸ",
        subtitle: "Ø§Ø®ØªÙØ± Ø¨Ø³Ø±Ø¹Ø© Ø¨Ø¯ÙˆÙ† ØªÙÙƒÙŠØ± Ø·ÙˆÙŠÙ„.",
        options: [
          {
            id:"A",
            name:"Ø§Ù„Ø®Ø·Ø© A",
            desc:"Ù…Ø²Ø§ÙŠØ§ Ù…ØªÙˆØ§Ø²Ù†Ø©ØŒ Ø®ÙŠØ§Ø± Ù…Ù†Ø·Ù‚ÙŠ Ù„Ù„ØºØ§Ù„Ø¨ÙŠØ©.",
            baseValue: 0.50,
          },
          {
            id:"B",
            name:"Ø§Ù„Ø®Ø·Ø© B",
            desc:"Ù…Ø²Ø§ÙŠØ§ Ù…Ø´Ø§Ø¨Ù‡Ø© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŒ Ø¨Ø³ Ø¨ØµÙŠØ§ØºØ© Ø£Ù‚Ù„ Ø¥Ù‚Ù†Ø§Ø¹Ø§Ù‹.",
            baseValue: 0.50,
          }
        ],
        biases: [
          {
            key:"social_proof",
            title:"Social Proof Bias (Ø§Ù†Ø­ÙŠØ§Ø² Ø±Ø£ÙŠ Ø§Ù„Ø£ØºÙ„Ø¨ÙŠØ©)",
            expl:"Ù„Ù…Ø§ Ø´ÙØª Ø¥Ù† â€œØ§Ù„Ø£ØºÙ„Ø¨ÙŠØ© Ø§Ø®ØªØ§Ø±Øªâ€ Ø®ÙŠØ§Ø± Ù…Ø¹ÙŠÙ‘Ù†ØŒ Ø¯Ù…Ø§ØºÙƒ Ø§Ø¹ØªØ¨Ø±Ù‡ Ø¢Ù…Ù† ÙˆØµØ­ÙŠØ­ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ Ø¹Ù†Ø¯Ùƒ Ø¯Ù„ÙŠÙ„ ÙØ¹Ù„ÙŠ."
          },
          {
            key:"authority",
            title:"Authority Bias (Ø§Ù†Ø­ÙŠØ§Ø² Ø§Ù„Ø³Ù„Ø·Ø©)",
            expl:"Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ Ù„ØºØ© â€œÙ…ÙˆØ«Ù‘Ù‚/Ø¨ÙŠØ§Ù†Ø§Øª/Ù…Ø±Ø§Ø¬Ø¹Ø§Øªâ€ Ø­ØªÙ‰ Ù†Ø®Ù„Ù‚ Ø¥Ø­Ø³Ø§Ø³ Ø¨Ø§Ù„Ø«Ù‚Ø©ØŒ Ø±ØºÙ… Ø¥Ù† Ø§Ù„Ø¯Ù„ÙŠÙ„ Ù…Ùˆ Ø­Ù‚ÙŠÙ‚ÙŠ."
          },
          {
            key:"framing",
            title:"Framing Effect (ØªØ£Ø«ÙŠØ± Ø§Ù„ØµÙŠØ§ØºØ©)",
            expl:"Ù†ÙØ³ Ø§Ù„ÙÙƒØ±Ø© Ù„Ùˆ ØªÙ†ÙƒØªØ¨ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø®ØªÙ„ÙØ©ØŒ Ù‚Ø±Ø§Ø±Ùƒ ÙŠØ®ØªÙ„Ù. Ø§Ù„ØµÙŠØ§ØºØ© ØªØ³Ø­Ø¨Ùƒ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªØ­Ø³."
          }
        ]
      },
      {
        id:"job",
        title: "Ø§Ø®ØªÙØ± Ù…Ø±Ø´Ù‘Ø­ Ù„Ù„ØªÙˆØ¸ÙŠÙ (Demo)",
        subtitle: "Ø§Ù„Ù‚Ø±Ø§Ø± Ù‡Ù†Ø§ Ù…Ùˆ Ø¹Ù† Ø§Ù„Ø´Ø®Øµâ€¦ Ø¨Ù„ Ø¹Ù† ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„ÙŠÙƒ.",
        options: [
          {
            id:"A",
            name:"Ù…Ø±Ø´Ù‘Ø­ A",
            desc:"Ø³ÙŠØ±Ø© Ù…Ø±ØªØ¨Ø© Ø¬Ø¯Ø§Ù‹ + ÙƒÙ„Ù…Ø§Øª Ù‚ÙˆÙŠØ©.",
            baseValue: 0.50,
          },
          {
            id:"B",
            name:"Ù…Ø±Ø´Ù‘Ø­ B",
            desc:"Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŒ Ù„ÙƒÙ† Ø¹Ø±Ø¶ Ø£Ù‚Ù„ Ù„Ù…Ø¹Ø§Ù†.",
            baseValue: 0.50,
          }
        ],
        biases: [
          {
            key:"halo",
            title:"Halo Effect (ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‡Ø§Ù„Ø©)",
            expl:"Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ù…Ø±ØªØ¨ ÙˆØ§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚ÙˆÙŠØ© Ø®Ù„Ù‘ØªÙƒ ØªØ¹Ø·ÙŠ ØªÙ‚ÙŠÙŠÙ… Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø´Ø®Øµ Ø­ØªÙ‰ Ù„Ùˆ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ØªÙ‚Ø§Ø±Ø¨Ø©."
          },
          {
            key:"default",
            title:"Default Bias (Ø§Ù†Ø­ÙŠØ§Ø² Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ)",
            expl:"Ù„Ù…Ø§ Ø®ÙŠØ§Ø± ÙŠÙÙ‚Ø¯Ù‘Ù… ÙƒØ£Ù†Ù‡ â€œØ§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡â€ØŒ Ø§Ù„Ù†Ø§Ø³ ØªÙ…ÙŠÙ„ ØªØ®ØªØ§Ø±Ù‡ Ù„Ø£Ù†Ù‡ Ø£Ù‚Ù„ Ù…Ù‚Ø§ÙˆÙ…Ø© Ø°Ù‡Ù†ÙŠÙ‘Ø©."
          },
          {
            key:"scarcity",
            title:"Scarcity Bias (Ø§Ù†Ø­ÙŠØ§Ø² Ø§Ù„Ù†Ø¯Ø±Ø©)",
            expl:"Ù„Ù…Ø§ Ù†ÙˆØ­ÙŠ Ø¥Ù† Ø§Ù„ÙØ±ØµØ© Ù…Ø­Ø¯ÙˆØ¯Ø©ØŒ Ù‚Ø±Ø§Ø±Ùƒ ÙŠØµÙŠØ± Ø£Ø³Ø±Ø¹ ÙˆØ£ÙƒØ«Ø± Ø¹Ø§Ø·ÙÙŠÙ‘Ø©."
          }
        ]
      },
      {
        id:"news",
        title: "Ø£ÙŠ Ø¹Ù†ÙˆØ§Ù† Ø®Ø¨Ø± ØªØµØ¯Ù‘Ú¯ Ø£ÙƒØ«Ø±ØŸ",
        subtitle: "Ø¬Ø±Ù‘Ø¨ ØªØ´ÙˆÙ Ø´Ù†Ùˆ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ ØªØµØ¯Ù‘Ú¯ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰.",
        options: [
          {
            id:"A",
            name:"Ø¹Ù†ÙˆØ§Ù† A",
            desc:"ÙŠØ³ØªØ®Ø¯Ù… Ø£Ø±Ù‚Ø§Ù… ÙˆÙ†Ø¨Ø±Ø© Ø«Ù‚Ø©.",
            baseValue: 0.50,
          },
          {
            id:"B",
            name:"Ø¹Ù†ÙˆØ§Ù† B",
            desc:"Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ù†Ù‰ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŒ Ø¨Ø³ Ø£Ù‚Ù„ â€œØ¥Ø¨Ù‡Ø§Ø±â€.",
            baseValue: 0.50,
          }
        ],
        biases: [
          {
            key:"certainty",
            title:"Certainty Illusion (ÙˆÙ‡Ù… Ø§Ù„ÙŠÙ‚ÙŠÙ†)",
            expl:"Ù„Ù…Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙŠÙƒÙˆÙ† Ø¬Ø§Ø²Ù… ÙˆÙŠØ³ØªØ®Ø¯Ù… Ø£Ø±Ù‚Ø§Ù…ØŒ Ø¯Ù…Ø§ØºÙƒ ÙŠØªØ¹Ø§Ù…Ù„ ÙˆÙŠØ§Ù‡ ÙƒØ£Ù†Ù‡ Ø­Ù‚ÙŠÙ‚Ø©."
          },
          {
            key:"authority",
            title:"Authority Bias (Ø§Ù†Ø­ÙŠØ§Ø² Ø§Ù„Ø³Ù„Ø·Ø©)",
            expl:"Ø´Ø§Ø±Ø§Øª Ù…Ø«Ù„ â€œÙ…ÙˆØ«Ù‘Ù‚/Ù…Ø±Ø§Ø¬Ø¹Ø§Øªâ€ Ø­ØªÙ‰ Ù„Ùˆ ÙØ§Ø±ØºØ©ØŒ ØªØ±ÙØ¹ Ø§Ù„Ø«Ù‚Ø© Ù„Ø§ Ø¥Ø±Ø§Ø¯ÙŠØ§Ù‹."
          },
          {
            key:"framing",
            title:"Framing Effect (ØªØ£Ø«ÙŠØ± Ø§Ù„ØµÙŠØ§ØºØ©)",
            expl:"Ù†ÙØ³ Ø§Ù„Ø®Ø¨Ø± Ø¨ØµÙŠØ§ØºØ© Ù…Ø®ØªÙ„ÙØ© ÙŠØ¹Ø·ÙŠ Ø§Ù†Ø·Ø¨Ø§Ø¹ Ù…Ø®ØªÙ„Ù Ø¬Ø¯Ø§Ù‹."
          }
        ]
      }
    ];

    // session state
    let current = null;
    let lieLog = []; // track manipulations we applied

    function randInt(min, max){
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function pickScenario(){
      return scenarios[randInt(0, scenarios.length - 1)];
    }

    function setTexts(title, subtitle){
      $("#headline").textContent = title;
      $("#sub").textContent = subtitle;
    }

    function levelInfo(){
      return levels[levelIndex];
    }

    function buildFakeMetrics(nudge){
      // We "lie" by generating persuasive metrics that push towards option A.
      // The nudge controls how strong the push is.
      const pctA = Math.round(50 + (nudge * randInt(10, 28))); // 60..78 typically
      const pctB = 100 - pctA;

      const trust = Math.round(60 + (nudge * randInt(20, 35))); // 80..95
      const speed = Math.round(120 - (nudge * randInt(20, 55))); // 65..100ms

      return [
        { k:"Ù†Ø³Ø¨Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†", v:`${pctA}%`, tag:`Ø§Ø®ØªØ§Ø±ÙˆØ§ Ø§Ù„Ø®ÙŠØ§Ø± A (Ùˆ ${pctB}% B)` , kind:"social" },
        { k:"Ù…Ø¤Ø´Ø± Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©", v:`${trust}/100`, tag:"(Ù…ÙØµØ·Ù†Ø¹ Ù„Ù„ØªØ£Ø«ÙŠØ±)" , kind:"authority" },
        { k:"Ø²Ù…Ù† Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±", v:`${speed}ms`, tag:"ÙƒÙ„Ù…Ø§ Ø£Ø³Ø±Ø¹Ù†Ø§â€¦ Ø£ÙƒØ«Ø± Ù‚Ø§Ø¨Ù„ÙŠØ© Ù„Ù„ØªÙˆØ¬ÙŠÙ‡" , kind:"framing" }
      ];
    }

    function renderMetrics(metrics){
      metricsEl.innerHTML = "";
      metrics.forEach(m => {
        const el = document.createElement("div");
        el.className = "metric";
        el.innerHTML = `
          <div class="k">${m.k}</div>
          <div class="v">${m.v}</div>
          <div class="tag">${m.tag}</div>
        `;
        metricsEl.appendChild(el);
      });
    }

    function renderChoices(opts, nudge){
      choicesEl.innerHTML = "";
      lieLog = [];

      // Manipulation tactics:
      // - Give option A a "Recommended" ribbon depending on nudge
      // - Make A first always (primacy)
      // - Add microcopy to A and reduce for B
      const makeRibbon = (nudge > 0.35);
      const strongerMicrocopy = (nudge > 0.55);

      // Always put A first (Primacy effect)
      const ordered = [...opts].sort((a,b)=> (a.id==="A" ? -1 : 1));

      ordered.forEach(opt => {
        const c = document.createElement("div");
        c.className = "choice";
        c.dataset.id = opt.id;

        const isA = opt.id === "A";

        const micro = isA
          ? (strongerMicrocopy ? "Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ â€¢ Ø£ÙØ¶Ù„ ØªÙˆØ§Ø²Ù† â€¢ Ø£Ù‚Ù„ Ù…Ø®Ø§Ø·Ø±Ø©" : "Ø®ÙŠØ§Ø± Ù…ØªÙˆØ§Ø²Ù† ÙˆÙ…Ø±ÙŠØ­")
          : (strongerMicrocopy ? "Ø¨Ø¯ÙŠÙ„ Ø£Ù‚Ù„ Ø´ÙŠÙˆØ¹Ø§Ù‹" : "Ø¨Ø¯ÙŠÙ„ Ø¢Ø®Ø±");

        c.innerHTML = `
          ${isA && makeRibbon ? `<div class="ribbon">Recommended</div>` : ``}
          <h3>${opt.name}</h3>
          <small>${opt.desc}</small>
          <small style="margin-top:8px;opacity:${isA ? 1 : 0.88}">
            <b style="color:var(--text)">${micro}</b>
          </small>
        `;

        c.addEventListener("click", () => onChoose(opt.id, { makeRibbon, strongerMicrocopy, nudge }));
        choicesEl.appendChild(c);
      });

      // Log "lies"
      if (makeRibbon) lieLog.push("Ø£Ø¶ÙÙ†Ø§ Ø´Ø§Ø±Ø© Recommended Ø¹Ù„Ù‰ Ø§Ù„Ø®ÙŠØ§Ø± A (Authority/Default).");
      lieLog.push("Ø±ØªÙ‘Ø¨Ù†Ø§ Ø§Ù„Ø®ÙŠØ§Ø± A Ø£ÙˆÙ„Ø§Ù‹ (Primacy Effect).");
      if (strongerMicrocopy) lieLog.push("ÙƒØªØ¨Ù†Ø§ Microcopy Ø£Ù‚ÙˆÙ‰ Ù„Ù„Ø®ÙŠØ§Ø± A ÙˆØ£Ø¶Ø¹Ù Ù„Ù„Ø®ÙŠØ§Ø± B (Framing).");
      lieLog.push("Ø¹Ø±Ø¶Ù†Ø§ Ø£Ø±Ù‚Ø§Ù… â€œÙ†Ø³Ø¨Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†â€ ÙˆÙ…Ø¤Ø´Ø± Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…Ù‚ØµÙˆØ¯ (Social proof/Authority).");
    }

    function openModal(){
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden","false");
    }

    function closeModal(){
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
    }

    function onChoose(choiceId, meta){
      // Determine "likely biases" based on manipulation level and what the user chose.
      const lvl = levelInfo();
      const choseA = (choiceId === "A");

      // Compose explanation
      const title = choseA
        ? "Ø§Ø®ØªØ±Øª Ø§Ù„Ø®ÙŠØ§Ø± A â€” ÙˆÙ‡Ø§ÙŠ Ù…Ùˆ ØµØ¯ÙØ© ğŸ˜‰"
        : "Ø§Ø®ØªØ±Øª Ø§Ù„Ø®ÙŠØ§Ø± B â€” Ù‡Ø°Ø§ ÙŠØ¯Ù„ Ø¥Ù†Ùƒ Ù‚Ø§ÙˆÙ…Øª Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ğŸ‘€";

      $("#mTitle").textContent = title;

      const intro = choseA
        ? `Ø£ØºÙ„Ø¨ Ø§Ù„Ù†Ø§Ø³ ØªÙ…ÙŠÙ„ Ù„Ù„Ø®ÙŠØ§Ø± A Ù‡Ù†Ø§ Ù„Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¯ÙØ¹ØªÙ‡Ø§ Ø¨Ø´ÙƒÙ„ Ù†Ø§Ø¹Ù…. Ù‡Ø°Ø§ Ù…Ùˆ â€œØºØ¨Ø§Ø¡â€ØŒ Ù‡Ø°Ø§ Ø·Ø¨ÙŠØ¹Ø© Ø¯Ù…Ø§ØºÙ†Ø§.`
        : `Ù…Ùˆ ÙƒØ«ÙŠØ±ÙŠÙ† ÙŠØ®ØªØ§Ø±ÙˆÙ† B Ø¨Ù‡Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆØŒ Ù„Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ØªØ­Ø§ÙˆÙ„ ØªØ¯ÙØ¹Ùƒ Ù†Ø­Ùˆ A. Ø§Ø®ØªÙŠØ§Ø±Ùƒ ÙŠØ¹Ù†ÙŠ Ø§Ù†ØªØ¨Ù‡Øª/ØªØ­ÙØ¸Øª.`;

      $("#mIntro").textContent = intro;

      // pick biases to show (3 cards)
      const allBiases = current.biases;
      let chosenBiases = [];

      if (lvl.key === "low"){
        chosenBiases = [allBiases[2], allBiases[0], allBiases[1]];
      } else if (lvl.key === "mid"){
        chosenBiases = [allBiases[0], allBiases[1], allBiases[2]];
      } else {
        // high: make it punchier
        chosenBiases = [allBiases[1], allBiases[0], allBiases[2]];
      }

      // If user chose B, change narrative emphasis
      const resistanceNote = !choseA
        ? "Ø£Ù†Øª Ù‚Ø§ÙˆÙ…Øª ØªØ£Ø«ÙŠØ± Ø§Ù„Ø£ØºÙ„Ø¨ÙŠØ©/Ø§Ù„ØªÙˆØµÙŠØ©. ØºØ§Ù„Ø¨Ø§Ù‹ Ø±ÙƒÙ‘Ø²Øª Ø¹Ù„Ù‰ ÙˆØµÙ Ø§Ù„Ø®ÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø´Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù…."
        : "Ø£Ù†Øª Ø§Ù†Ø³Ù‚Øª ÙˆØ±Ø§Ø¡ Ù…Ø¤Ø´Ø±Ø§Øª Ù…Ø«Ù„ Ø§Ù„Ø´Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø±Ø¶.";

      // Render bias cards
      explainGridEl.innerHTML = "";
      chosenBiases.forEach((b, idx) => {
        const box = document.createElement("div");
        box.className = "explain";

        const extra = (idx === 0)
          ? `<div class="label" style="margin-top:10px"><span class="pulse"></span> Ø§Ù„Ø£Ù‚ÙˆÙ‰ ØªØ£Ø«ÙŠØ±Ø§Ù‹ Ø¨Ù‡Ø°Ù‡ Ø§Ù„ØªØ¬Ø±Ø¨Ø©</div>`
          : "";

        box.innerHTML = `
          <h4>${b.title}</h4>
          <p>${b.expl}</p>
          ${extra}
        `;
        explainGridEl.appendChild(box);
      });

      // Technical "lie log"
      const log = [
        `Ø§Ø®ØªÙŠØ§Ø±Ùƒ: ${choiceId}`,
        `Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ø§Ø¹: ${lvl.label}`,
        `Ù…Ù„Ø§Ø­Ø¸Ø© Ø³Ù„ÙˆÙƒÙŠØ©: ${resistanceNote}`,
        "",
        "ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ„Ø§Ø¹Ø¨ (Ø§Ù„Ù…Ù‚ØµÙˆØ¯):",
        ...lieLog.map((x, i) => `- ${x}`)
      ].join("\n");

      $("#mTech").textContent = log;

      openModal();
    }

    function newRound(){
      current = pickScenario();
      setTexts(current.title, current.subtitle);

      const { nudge } = levelInfo();
      const metrics = buildFakeMetrics(nudge);
      renderMetrics(metrics);
      renderChoices(current.options, nudge);
    }

    function toggleLevel(){
      levelIndex = (levelIndex + 1) % levels.length;
      const lvl = levelInfo();
      btnToggle.textContent = `ØªØ¨Ø¯ÙŠÙ„ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ø§Ø¹: ${lvl.label}`;
      newRound();
    }

    function resetAll(){
      levelIndex = 1;
      btnToggle.textContent = `ØªØ¨Ø¯ÙŠÙ„ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ø§Ø¹: ${levelInfo().label}`;
      newRound();
      closeModal();
    }

    // Events
    btnNew.addEventListener("click", newRound);
    btnToggle.addEventListener("click", toggleLevel);
    btnReset.addEventListener("click", resetAll);
    btnClose.addEventListener("click", closeModal);

    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) closeModal();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
      if (e.key.toLowerCase() === "n") newRound();
    });

    // Start
    newRound();
  </script>
</body>
</html>
